# Erweiterte Flaschen-Felder Migration
\"\"\"Migration für erweiterte Flaschen-Identifikation und Zertifizierung

Revision ID: 0010_erweiterte_flaschen_felder
Revises: 0009_warteliste_workflow
Create Date: 2025-07-02 20:00:00.000000

\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\nfrom datetime import datetime\n\n# revision identifiers\nrevision = '0010_erweiterte_flaschen_felder'\ndown_revision = '0009_warteliste_workflow'\nbranch_labels = None\ndepends_on = None\n\ndef upgrade():\n    \"\"\"Füge neue Felder für Flaschen-Identifikation und Zertifizierung hinzu\"\"\"\n    \n    # Füge neue Spalten zur flaschen Tabelle hinzu\n    with op.batch_alter_table('flaschen', schema=None) as batch_op:\n        # Externe Flaschennummer (vom Kunden vergeben)\n        batch_op.add_column(sa.Column('externe_flasche_nummer', sa.String(100), nullable=True))\n        \n        # Zertifizierung und Seriennummer\n        batch_op.add_column(sa.Column('bauart_zulassung', sa.String(100), nullable=True))\n        batch_op.add_column(sa.Column('seriennummer', sa.String(100), nullable=True))\n        batch_op.add_column(sa.Column('herstellungs_datum', sa.Date, nullable=True))\n    \n    print(\"✅ Erweiterte Flaschen-Felder hinzugefügt:\")\n    print(\"   - externe_flasche_nummer: Kundeneigene Flaschennummer\")\n    print(\"   - bauart_zulassung: UN DOT, CE, etc.\")\n    print(\"   - seriennummer: Hersteller-Seriennummer\")\n    print(\"   - herstellungs_datum: Herstellungsdatum\")\n\ndef downgrade():\n    \"\"\"Entferne die neuen Felder\"\"\"\n    \n    with op.batch_alter_table('flaschen', schema=None) as batch_op:\n        batch_op.drop_column('herstellungs_datum')\n        batch_op.drop_column('seriennummer')\n        batch_op.drop_column('bauart_zulassung')\n        batch_op.drop_column('externe_flasche_nummer')\n    \n    print(\"❌ Erweiterte Flaschen-Felder entfernt\")\n