@echo off
title Wartungsmanager - Installation Auswahl
color 0F
mode con: cols=90 lines=35

echo.
echo â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo â–ˆâ–ˆ                                                                                â–ˆâ–ˆ
echo â–ˆâ–ˆ    â–ˆâ–ˆ     â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ
echo â–ˆâ–ˆ    â–ˆâ–ˆ     â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ       â–ˆâ–ˆ          â–ˆâ–ˆ
echo â–ˆâ–ˆ    â–ˆâ–ˆ  â–ˆ  â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ
echo â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ    â–ˆâ–ˆ      â–ˆâ–ˆ     â–ˆâ–ˆ
echo â–ˆâ–ˆ     â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ    â–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆ
echo â–ˆâ–ˆ                                                                                â–ˆâ–ˆ
echo â–ˆâ–ˆ                        MANAGER - INSTALLER v1.0                              â–ˆâ–ˆ
echo â–ˆâ–ˆ                                                                                â–ˆâ–ˆ
echo â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
echo.
echo                           Vollautomatische Installation
echo                              fÃ¼r Kompressor-Ãœberwachung
echo.
echo ================================================================================
echo   INSTALLATIONS-OPTIONEN
echo ================================================================================
echo.
echo   Sie haben zwei MÃ¶glichkeiten fÃ¼r die Installation:
echo.
echo   [1] KASSENRECHNER als Server (EMPFOHLEN)
echo       âœ… Beste Performance und ZuverlÃ¤ssigkeit
echo       âœ… Vollautomatische Installation mit 1-Klick
echo       âœ… Desktop-Icon und Auto-Start
echo       âœ… NAS-Backup zur WD My Cloud automatisch
echo       âœ… iPad/Touch-optimiert mit popup-freier Bedienung
echo.
echo   [2] WD MY CLOUD NAS als Server
echo       âœ… Zentrale Datenhaltung auf NAS
echo       âœ… 24/7 VerfÃ¼gbarkeit (falls NAS immer lÃ¤uft)
echo       âœ… Mehrere Clients kÃ¶nnen gleichzeitig zugreifen
echo       âš ï¸  BenÃ¶tigt Python-Installation auf NAS
echo.
echo ================================================================================
echo   SYSTEM-INFORMATIONEN
echo ================================================================================
echo.
echo   ðŸŒ WD My Cloud NAS:     192.168.0.231
echo   ðŸ“ NAS-Pfad:            \\192.168.0.231\Tauchen\KompressorUeberwachung
echo   ðŸ’» Kassenrechner:       192.168.0.209 (dieser PC - lokale Installation)
echo   ðŸ“± iPad-UnterstÃ¼tzung:  Beide Optionen popup-frei und touch-optimiert
echo.
echo ================================================================================

:menu
echo.
echo   Welche Installation mÃ¶chten Sie durchfÃ¼hren?
echo.
echo   [1] Kassenrechner-Installation (empfohlen)
echo   [2] WD My Cloud NAS-Installation  
echo   [3] Hilfe und weitere Informationen
echo   [4] Beenden
echo.
choice /c 1234 /n /m "   Ihre Auswahl (1-4): "

if errorlevel 4 goto exit
if errorlevel 3 goto help
if errorlevel 2 goto nas_install
if errorlevel 1 goto kasse_install

:kasse_install
echo.
echo ================================================================================
echo   KASSENRECHNER-INSTALLATION
echo ================================================================================
echo.
echo   ðŸš€ Starte vollautomatische Kassenrechner-Installation...
echo.
echo   Was wird installiert:
echo   âœ… Python Portable (falls nicht vorhanden)
echo   âœ… Wartungsmanager komplett eingerichtet
echo   âœ… Desktop-Icon "Wartungsmanager.bat"
echo   âœ… Auto-Start bei Windows-Boot
echo   âœ… Automatische NAS-Backups (alle 6h)
echo   âœ… Firewall-Konfiguration (Port 5000)
echo   âœ… iPad-Touch-Optimierung
echo.
echo   ðŸ“ Installation nach: C:\Wartungsmanager
echo   ðŸŒ Zugriff Ã¼ber: http://localhost:5000
echo   ðŸ’¾ Backup nach: \\192.168.0.231\Tauchen\KompressorUeberwachung\backup
echo.
echo   Fortfahren mit der Installation?
choice /c JN /n /m "   [J]a oder [N]ein: "
if errorlevel 2 goto menu

echo.
echo   ðŸ” ADMINISTRATOR-RECHTE ERFORDERLICH
echo   Der Installer benÃ¶tigt Administrator-Rechte fÃ¼r:
echo   - Python-Installation
echo   - Firewall-Konfiguration  
echo   - Auto-Start-Einrichtung
echo   - Task Scheduler (Backups)
echo.
pause
call "%~dp0setup_wartungsmanager.bat"
goto end

:nas_install
echo.
echo ================================================================================
echo   WD MY CLOUD NAS-INSTALLATION
echo ================================================================================
echo.
echo   ðŸ¢ Starte NAS-Installation...
echo.
echo   Was wird eingerichtet:
echo   âœ… Wartungsmanager-Dateien werden zur NAS kopiert
echo   âœ… NAS-Start-Script erstellt
echo   âœ… Client-Zugriff-Scripts fÃ¼r alle PCs
echo   âœ… Desktop-Icons fÃ¼r einfachen Zugriff
echo   âœ… iPad-Touch-Optimierung automatisch
echo.
echo   ðŸ“ NAS-Pfad: \\192.168.0.231\Tauchen\KompressorUeberwachung
echo   ðŸŒ Zugriff Ã¼ber: http://192.168.0.231:5000
echo   ðŸ’» Client-Script: Automatischer Browser-Start
echo.
echo   âš ï¸  VORAUSSETZUNG: Python muss auf der NAS installiert sein!
echo.
echo   Fortfahren mit der NAS-Installation?
choice /c JN /n /m "   [J]a oder [N]ein: "
if errorlevel 2 goto menu

echo.
pause
call "%~dp0setup_nas_deployment.bat"
goto end

:help
echo.
echo ================================================================================
echo   HILFE UND INFORMATIONEN
echo ================================================================================
echo.
echo   ðŸ¤” WELCHE OPTION SOLL ICH WÃ„HLEN?
echo.
echo   ðŸ‘ KASSENRECHNER-INSTALLATION (Option 1) - EMPFOHLEN WENN:
echo      - Sie wollen die einfachste Installation
echo      - Der Kassenrechner lÃ¤uft fast immer/24h
echo      - Sie wollen beste Performance
echo      - Sie brauchen keine zentrale NAS-LÃ¶sung
echo      - Sie wollen 1-Klick-Installation ohne Probleme
echo.
echo   ðŸ¢ NAS-INSTALLATION (Option 2) - EMPFOHLEN WENN:
echo      - Sie wollen zentrale Datenhaltung
echo      - Mehrere Kassenrechner gleichzeitig nutzen
echo      - Die NAS lÃ¤uft 24/7 zuverlÃ¤ssiger als Kassenrechner
echo      - Sie haben Python-Kenntnisse fÃ¼r NAS-Setup
echo      - Sie wollen alle Daten zentral auf der NAS
echo.
echo   ðŸ“± IPAD-UNTERSTÃœTZUNG:
echo      Beide Optionen unterstÃ¼tzen iPad vollstÃ¤ndig:
echo      âœ… Popup-freie Bedienung (Problem vom 26.06.2025 gelÃ¶st!)
echo      âœ… Touch-optimierte Buttons (44px+ Touch-Targets)
echo      âœ… Inline-Formulare statt Modals
echo      âœ… Toast-Benachrichtigungen statt Popups
echo      âœ… Automatische iPad-Erkennung
echo.
echo   ðŸ”§ NACH DER INSTALLATION:
echo      Option 1: Doppelklick auf Desktop-Icon â†’ Sofort einsatzbereit
echo      Option 2: start_nas_server.bat auf NAS â†’ Clients per Browser
echo.
echo   ðŸ’¾ BACKUP-SYSTEM:
echo      Option 1: Automatische Backups zur NAS (alle 6h)
echo      Option 2: Daten direkt auf NAS (automatisch gesichert)
echo.
echo   ðŸŽ¯ UNSER TIPP: WÃ¤hlen Sie Option 1 (Kassenrechner)!
echo      - Deutlich einfacher und zuverlÃ¤ssiger
echo      - Vollautomatische Installation
echo      - Backup zur NAS trotzdem vorhanden
echo      - Bei Problemen einfacher zu reparieren
echo.
pause
goto menu

:exit
echo.
echo ================================================================================
echo   INSTALLATION ABGEBROCHEN
echo ================================================================================
echo.
echo   Sie kÃ¶nnen die Installation jederzeit durch erneutes AusfÃ¼hren
echo   dieser Datei starten.
echo.
echo   ðŸ“ Installer-Dateien verfÃ¼gbar:
echo      - setup_wartungsmanager.bat (Kassenrechner)
echo      - setup_nas_deployment.bat (NAS)
echo      - ipad_zugriff.bat (iPad-Hilfe)
echo.
goto end

:end
echo.
echo   DrÃ¼cken Sie eine Taste zum Beenden...
pause >nul
exit /b 0
